<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScriptメモリ管理と状態管理の基礎</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>JavaScriptメモリ管理と状態管理の基礎</h1>
        
        <div class="section">
            <h2>1. ミュータブル操作（直接変更）</h2>
            <div class="state-display">
                <div class="memory-box">
                    <h3>メモリ状態</h3>
                    <pre id="mutable-memory">{ count: 0 }</pre>
                    <div class="memory-address">メモリアドレス: <span id="mutable-address">0x1234</span></div>
                </div>
                <div class="controls">
                    <button id="mutable-increment">カウントアップ</button>
                    <button id="mutable-add-property">プロパティ追加</button>
                    <button id="mutable-reset">リセット</button>
                </div>
                <div class="log-box">
                    <h3>操作ログ</h3>
                    <div id="mutable-log" class="log"></div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2>2. イミュータブル操作（新しいオブジェクト作成）</h2>
            <div class="state-display">
                <div class="memory-box">
                    <h3>メモリ状態</h3>
                    <pre id="immutable-memory">{ count: 0 }</pre>
                    <div class="memory-address">メモリアドレス: <span id="immutable-address">0x5678</span></div>
                </div>
                <div class="controls">
                    <button id="immutable-increment">カウントアップ</button>
                    <button id="immutable-add-property">プロパティ追加</button>
                    <button id="immutable-reset">リセット</button>
                </div>
                <div class="log-box">
                    <h3>操作ログ</h3>
                    <div id="immutable-log" class="log"></div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h2>3. 状態管理ライブラリの実装</h2>
            <div class="state-display">
                <div class="memory-box">
                    <h3>ストア状態</h3>
                    <pre id="store-memory">{ count: 0 }</pre>
                    <div class="memory-address">メモリアドレス: <span id="store-address">0x9ABC</span></div>
                </div>
                <div class="controls">
                    <button id="store-increment">カウントアップ</button>
                    <button id="store-add-property">プロパティ追加</button>
                    <button id="store-reset">リセット</button>
                </div>
                <div class="log-box">
                    <h3>操作ログ</h3>
                    <div id="store-log" class="log"></div>
                </div>
                <div class="subscribers">
                    <h3>サブスクライバー</h3>
                    <div class="subscriber" id="subscriber1">
                        <div class="subscriber-title">UI更新リスナー</div>
                        <div class="subscriber-state">{ count: 0 }</div>
                    </div>
                    <div class="subscriber" id="subscriber2">
                        <div class="subscriber-title">ログリスナー</div>
                        <div class="subscriber-state">{ count: 0 }</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="memory-utils.js"></script>
    <script src="state-manager.js"></script>
    <script src="app.js"></script>
</body>
</html>
